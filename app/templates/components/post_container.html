<script>
    function like(id){
      fetch("/votes/"+id,{
          method:"POST"
      ,})
      .then(response=>response.json())
      .then(document.getElementById(id).innerHTML ="")
      .then(data => document.getElementById(id).innerHTML = data.vote)
      .catch(err=>location.replace("/login/"))
  }
  </script>
<!--

      .then(document.getElementById(id).innerHTML ="")
      .then(data => document.getElementById(id).innerHTML = data.vote)
-->

<div class="container">
<div class="col-sm-3"></div>
  <div class="col-sm-6">
    <div class="row mb-3" >

        <div class="card shadow">
          <div class="row">
            <div class="col">
              <a href="/user-info/{{post.owner_id}}">{{post.username}}</a>
            </div>
          </div>
          <div class="row">
            <hr>
            <div class="col mb-3">
              <p class="card-text">
                {{post.content}}
              </p>
            </div>
          </div>
          <div class="row">
            {% if post.media%}
            <div class="col card">
              <img src="data:;base64,{{post.media}}">
            </div>
            {% endif%}
          </div>

          <div class="row mb-1">
              <hr>
              <div class="col">
                <p class="card-text text-center" id="{{post.id}}">{{post.votes}}</p>
              </div>
              <div class="col text-center">
                <button class="btn btn-outline-primary"  onclick="like({{post.id}})">like</button>
              </div>
              <div class="col text-center">
                <button class="btn btn-outline-primary">Share</button>
              </div>
          </div>
        </div>

      </div>
  </div>
  <div class="col-sm-3"></div>
</div>
